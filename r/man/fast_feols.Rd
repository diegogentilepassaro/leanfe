% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fast_feols.R
\name{fast_feols}
\alias{fast_feols}
\title{Fast High-Dimensional Fixed Effects Regression}
\usage{
fast_feols(
  data,
  y_col = NULL,
  x_cols = NULL,
  fe_cols = NULL,
  formula = NULL,
  weights = NULL,
  demean_tol = 0.001,
  n_iter = 100,
  vcov = "iid",
  cluster_cols = NULL,
  ssc = FALSE,
  sample_frac = NULL,
  backend = "polars"
)
}
\arguments{
\item{data}{Polars DataFrame, R data.frame, or path to parquet file.}

\item{y_col}{Dependent variable column name (optional if formula provided).}

\item{x_cols}{Character vector of independent variable column names (optional if formula provided).}

\item{fe_cols}{Character vector of fixed effect column names (optional if formula provided).}

\item{formula}{R-style formula: "y ~ x1 + x2 | fe1 + fe2" or "y ~ x | fe | z" (IV).
Supports:
\itemize{
  \item Regular variables: x1, x2
  \item Factor variables: i(region) - automatic dummy expansion
  \item Factor with reference: i(region, ref=R2) - specify base category
  \item Interactions: treatment:i(region) - heterogeneous effects
  \item Instruments (IV): third part after second |
}}

\item{weights}{Column name for regression weights (WLS).}

\item{demean_tol}{Convergence tolerance for iterative demeaning (default: 1e-3).}

\item{n_iter}{Maximum iterations for demeaning (default: 100).}

\item{vcov}{Variance-covariance estimator: "iid", "HC1", or "cluster" (default: "iid").}

\item{cluster_cols}{Character vector of clustering variables (required if vcov="cluster").}

\item{ssc}{Logical, small sample correction for clustered SEs (default: FALSE).}

\item{sample_frac}{Fraction of data to sample, e.g., 0.1 for 10\% (default: NULL).}

\item{backend}{Computation backend: "polars" (default) or "duckdb".
\itemize{
  \item "polars": Faster, better for data that fits in memory
  \item "duckdb": Lower memory usage, better for very large datasets
}}
}
\value{
A list containing:
\describe{
  \item{coefficients}{Named vector of coefficient estimates}
  \item{std_errors}{Named vector of standard errors}
  \item{n_obs}{Number of observations used}
  \item{iterations}{Number of demeaning iterations}
  \item{vcov_type}{Type of variance estimator used}
  \item{is_iv}{Logical, whether IV/2SLS was used}
  \item{n_instruments}{Number of instruments (if IV)}
  \item{n_clusters}{Number of clusters (if clustered SEs)}
}
}
\description{
Main entry point for fixed effects regression using either Polars or DuckDB backend.
By default uses Polars for speed; use DuckDB for very large datasets.
}
\details{
This is the recommended entry point for the package. It provides a unified API
that dispatches to either the Polars or DuckDB backend based on the \code{backend} parameter.

\strong{Choosing a Backend:}

Use Polars (default) when:
\itemize{
  \item Speed is the priority
  \item Data fits comfortably in memory
  \item You need the fastest possible execution
}

Use DuckDB when:
\itemize{
  \item Dataset is larger than available RAM
  \item Memory is constrained
  \item Reading directly from parquet files without loading into memory
}

\strong{Performance Comparison (12.7M obs, 4 FEs):}
\itemize{
  \item Polars: ~15s, ~1 GB memory
  \item DuckDB: ~18s, ~700 MB memory
}
}
\examples{
\dontrun{
library(polars)

# Basic usage with formula
df <- pl$read_parquet("data.parquet")
result <- fast_feols(df, formula = "y ~ treatment | customer + product")
print(result$coefficients["treatment"])

# With clustered standard errors
result <- fast_feols(
  df,
  formula = "y ~ treatment | customer + product",
  vcov = "cluster",
  cluster_cols = c("customer")
)

# Using DuckDB for large datasets
result <- fast_feols(
  "large_data.parquet",
  formula = "y ~ treatment | fe1 + fe2",
  backend = "duckdb"
)

# Factor variables with custom reference
result <- fast_feols(
  df,
  formula = "y ~ treatment + i(region, ref=R2) | customer + product"
)

# Difference-in-Differences
result <- fast_feols(
  df,
  formula = "y ~ treated_post | state + year",
  vcov = "cluster",
  cluster_cols = c("state")
)
}
}
\seealso{
\code{\link{fast_feols_polars}}, \code{\link{fast_feols_duckdb}}
}
